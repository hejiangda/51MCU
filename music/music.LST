C51 COMPILER V9.52.0.0   MUSIC                                                             02/07/2016 11:30:16 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MUSIC
OBJECT MODULE PLACED IN music.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE music.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

*** WARNING C500 IN LINE 1 OF music.c: LICENSE ERROR (R207(3): REGISTRY READ ERROR)

   1          /******************************************************************************/
   2          /**????:????????????????
   3          /**?    ?:???????12MHz?STC89C52???
   4          /**?????????,????????????????http://hi.baidu.com/mifklrxdjqbadoq
   5          /******************************************************************************/
   6          #include<reg52.h>
   7          sbit BUZZER = P1^2;
   8          
   9          #define uchar unsigned char
  10          #define uint  unsigned int
  11          #define REST         36                        //???
  12          #define A                  0                  //??1
  13          #define AB          1                  //??1.5
  14          #define B                  2                  //??2
  15          #define BC          3                  //??2.5
  16          #define C                  4                  //??3
  17          #define D                  5                  //??4
  18          #define DE                 6                  //??4.5
  19          #define E                 7                       //??5
  20          #define EF          8                  //??5.5
  21          #define F                  9                  //??6
  22          #define FG          10          //??6.5
  23          #define G                 11          //??7
  24          #define L                  12          //??1
  25          #define LM          13          //??1.5
  26          #define M                  14          //??2
  27          #define MN          15          //??2.5
  28          #define N                  16                 //??3
  29          #define O                  17          //??4
  30          #define OP          18          //??4.5
  31          #define P                  19          //??5
  32          #define PQ          20          //??5.5
  33          #define Q                  21          //??6
  34          #define QR          22          //??6.5
  35          #define R                  23          //??7
  36          #define S                  24          //??1
  37          #define SU          25          //??1.5
  38          #define U                  26          //??2
  39          #define UV          27          //??2.5
  40          #define V                  28          //??3
  41          #define W                  29          //??4
  42          #define WX          30          //??4.5
  43          #define X                  31          //??5
  44          #define XY          32          //??5.5
  45          #define Y                  33          //??6
  46          #define YZ          34          //??6.5
  47          #define Z                  35          //??7
  48          
  49          //??
  50          uchar code m_note[][2] = {
  51          {248,136},{248,243},{249,88},{249,184},{250,18},{250,103},{250,184},{251,3},{251,75},
  52          {251,143},{251,206},{252,11},{252,67},{252,121},{252,172},{252,219},{253,9},{253,51},
  53          {253,91},{253,129},{253,165},{253,199},{253,231},{254,5},{254,33},{254,60},{254,85},
  54          {254,109},{254,132},{254,153},{254,173},{254,192},{254,210},{254,227},{254,243},{255,2},
C51 COMPILER V9.52.0.0   MUSIC                                                             02/07/2016 11:30:16 PAGE 2   

  55          {0,0},
  56          };
  57          
  58          
  59          //??(1????????,32?????)
  60          uchar code display[][2] = {
  61          //???
  62          {N,8},{N,8},{O,8},{P,8},{P,8},{O,8},{N,8},{M,8},{L,8},{L,8},{M,8},{N,8},{N,12},{M,4},{M,8},{0xff,8},
  63          {N,8},{N,8},{O,8},{P,8},{P,8},{O,8},{N,8},{M,8},{L,8},{L,8},{M,8},{N,8},{M,12},{L,4},{L,8},{0xff,8},
  64          {M,8},{M,8},{N,8},{L,8},{M,8},{N,4},{O,4},{N,8},{L,8},{M,8},{N,4},{O,4},{N,8},{M,8},{L,8},{M,8},{E,8},
  65          {N,8},{N,8},{O,8},{P,8},{P,8},{O,8},{N,8},{M,8},{L,8},{L,8},{M,8},{N,8},{M,12},{L,4},{L,8},{0xff,8},
  66          {M,8},{M,8},{N,8},{L,8},{M,8},{N,4},{O,4},{N,8},{L,8},{M,8},{N,4},{O,4},{N,8},{M,8},{L,8},{M,8},{E,8},
  67          {N,8},{N,8},{O,8},{P,8},{P,8},{O,8},{N,8},{M,8},{L,8},{L,8},{M,8},{N,8},{M,12},{L,4},{L,8},{0xff,8},
  68          //??(?????)
  69          {N,8},{F,4},{F,4},{L,8},{N,8},{M,4},{M,2},{N,2},{M,4},{L,4},
  70          {M,4},{L,4},{F,8},{N,8},{F,4},{F,4},{L,8},{N,8},
  71          {P,4},{M,2},{N,2},{M,4},{L,4},{M,4},{L,4},{G,4},{E,4},
  72          {N,8},{F,4},{F,4},{L,8},{N,8},{M,4},{M,2},{N,2},{M,4},{L,4},
  73          {M,4},{L,4},{F,4},{E,4},{N,8},{F,4},{F,4},{L,8},{N,8},
  74          {P,4},{N,4},{0xff,24},//??
  75          {F,8},{F,4},{E,4},{F,8},{F,4},{L,4},{L,8},{M,4},{L,4},{F,8},
  76          {0xff,8},{L,8},{L,4},{E,4},{L,4},{M,4},{N,4},{P,4},{P,4},{N,4},
  77          {M,8},{N,8},{0xff,8},{Q,4},{Q,4},{Q,4},{P,4},{N,4},{N,8},{L,4},
  78          {F,4},{F,4},{F,4},{N,4},{M,8},{0xff,8},{N,4},{N,4},{P,4},{N,4},
  79          {M,4},{N,4},{M,4},{L,4},{F,8},{E,8},{F,8},{0xff,8},
  80          {F,8},{F,4},{E,4},{F,8},{F,4},{L,4},{L,8},{M,4},{L,4},{F,8},
  81          {0xff,8},{L,8},{L,4},{E,4},{L,4},{M,4},{N,4},{P,4},{P,4},{N,4},
  82          {M,8},{N,8},{0xff,8},{Q,4},{Q,4},{Q,4},{P,4},{N,4},{N,8},{L,4},
  83          {F,4},{F,4},{F,4},{N,4},{M,8},{0xff,8},{N,4},{N,4},{P,4},{N,4},
  84          {M,4},{N,4},{M,4},{L,4},{F,8},{E,8},{F,8},{0xff,8},
  85          {N,4},{N,4},{P,4},{N,4},{N,4},{P,4},{P,4},{Q,4},{S,4},{Q,4},
  86          {P,8},{Q,8},{0xff,8}, //?????
  87          {F,8},{F,4},{E,4},{F,8},{L,8},{M,4},{N,2},{M,2},{L,4},{M,4},
  88          {N,8},{0xff,8},{F,4},{Q,4},{Q,4},{P,4},{M,4},{N,2},{M,2},
  89          {L,4},{M,4},{N,8},{0xff,8},{0xff,16},{L,4},{F,4},{F,4},{L,4},
  90          {M,8},{E,4},{E,4},{N,4},{P,4},{N,4},{M,4},{L,8},{0xff,8},
  91          {F,4},{L,4},{M,4},{N,4},{M,4},{L,4},{E,4},{C,4},{F,8},{0xff,8},{0xff,16},
  92          {F,8},{F,4},{E,4},{F,8},{L,8},{M,4},{N,2},{M,2},{L,4},{M,4},
  93          {N,8},{0xff,8},{F,4},{Q,4},{Q,4},{P,4},{M,4},{N,2},{M,2},
  94          {L,4},{M,4},{N,8},{0xff,8},{0xff,16},{L,4},{F,4},{F,4},{L,4},
  95          {M,8},{E,4},{E,4},{N,4},{P,4},{N,4},{M,4},{L,12},{L,4},
  96          {F,4},{L,4},{M,4},{N,4},{P,4},{N,4},{N,4},{P,4},{Q,8},{0xff,8},{0xff,8},
  97          
  98          {Q,6}, {Q,2},{Q,4},{Q,4},{Q,6},{P,2},{N,4},{M,4},{M,6},{M,2},{N,6},{P,2},{N,6},{M,2},
  99          {L,6},{F,2},{F,8},{F,4},{E,4},{F,8},{F,4},{L,4}, {M,4},{N,2},{M,2},        {L,4},{M,4},{N,8},{0xff,8},
 100          {Q,4},{P,4},{N,4},{M,4},{P,4},{N,4},{M,4},{L,4},{L,8},{0xff,8},{F,2}, {A,2},{B,2},{C,2},{B,2},
 101          {A,2}, {F,2},{A,2},
 102          
 103          {N,4},{N,4},{P,4},{N,4},{N,4},{P,4},{P,4},{Q,4},{S,4},{Q,4},
 104          {P,8},{Q,8},{0xff,8}, //?????
 105          {F,8},{F,4},{E,4},{F,8},{L,8},{M,4},{N,2},{M,2},{L,4},{M,4},
 106          {N,8},{0xff,8},{F,4},{Q,4},{Q,4},{P,4},{M,4},{N,2},{M,2},
 107          {L,4},{M,4},{N,8},{0xff,8},{0xff,16},{L,4},{F,4},{F,4},{L,4},
 108          {M,8},{E,4},{E,4},{N,4},{P,4},{N,4},{M,4},{L,8},{0xff,8},
 109          {F,4},{L,4},{M,4},{N,4},{M,4},{L,4},{E,4},{C,4},{F,8},{0xff,8},{0xff,16},
 110          {F,8},{F,4},{E,4},{F,8},{L,8},{M,4},{N,2},{M,2},{L,4},{M,4},
 111          {N,8},{0xff,8},{F,4},{Q,4},{Q,4},{P,4},{M,4},{N,2},{M,2},
 112          {L,4},{M,4},{N,8},{0xff,8},{0xff,16},{L,4},{F,4},{F,4},{L,4},
 113          {M,8},{E,4},{E,4},{N,4},{P,4},{N,4},{M,4},{L,12},{L,4},
 114          {F,4},{L,4},{M,4},{N,4},{P,4},{N,4},{N,4},{P,4},{Q,8},{0xff,8},{0xff,8},
 115          
 116          
C51 COMPILER V9.52.0.0   MUSIC                                                             02/07/2016 11:30:16 PAGE 3   

 117          {0,0xff},
 118          };
 119          uchar time_h,time_l;
 120          void Delay(uchar x);
 121          
 122          void main()
 123          {
 124   1              uchar j;
 125   1              uint i;
 126   1              TMOD = 0x01;
 127   1              ET0 = 1;
 128   1              EA = 1;
 129   1              TR0 = 1;
 130   1              i = 0;
 131   1              j = 0;
 132   1              while(1)
 133   1              {
 134   2                      while(display[i][1] != 0xff)
 135   2                      {
 136   3                              if(display[i][0] == 0xff)
 137   3                              {
 138   4                                      TR0 = 0;
 139   4                                      Delay(display[i][1]);
 140   4                                  BUZZER = 1;        
 141   4                              }
 142   3                              else
 143   3                              {
 144   4                                      time_h = m_note[display[i][0]][0];
 145   4                                      time_l = m_note[display[i][0]][1];
 146   4                                      TH0 = time_h;
 147   4                                      TL0 = time_l;
 148   4                                      ET0 = 1;
 149   4                                      TR0 = 1;
 150   4                                      Delay(display[i][1]);
 151   4                                      TR0 = 0;
 152   4                                      ET0 = 0;
 153   4                                  BUZZER = 1;        
 154   4                              }                        
 155   3                              i++;
 156   3                      }
 157   2                      i = 0;
 158   2              }
 159   1      }
 160          
 161          void Timer0() interrupt 1
 162          {
 163   1              TR0 = 0;
 164   1              TH0 = time_h;
 165   1              TL0 = time_l;
 166   1              BUZZER = ~BUZZER;
 167   1              TR0 = 1;
 168   1      }
 169          
 170          void Delay(uchar x)
 171          {
 172   1              uint i,j;
 173   1              for(i = 0;i < x;i++)
 174   1                      for(j = 0;j < 12000;j++);
 175   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.52.0.0   MUSIC                                                             02/07/2016 11:30:16 PAGE 4   

   CODE SIZE        =    217    ----
   CONSTANT SIZE    =   1092    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
